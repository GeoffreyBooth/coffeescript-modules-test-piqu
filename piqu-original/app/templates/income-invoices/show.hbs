<div class="row sub-header">
  <div class="small-6 columns">
    <h1>Invoice</h1>
  </div>

  <div class="small-6 columns">
    <a {{action 'destroyBillingDocument' this}} class='button alert right'>
      Delete
    </a>
    {{#link-to 'income-invoices.edit' this class="button right"}}
      Edit
    {{/link-to}}
    <a {{action 'viewPdf' this}} class="button right">View PDF</a>
  </div>
</div>

<div class="row">
  <div class="small-12 columns">
    <p>Emitted at: {{moment emittedAt dateOutputFormat}}</p>
    <p>Paid at: {{moment paidAt dateOutputFormat}}</p>
    <p>{{state}}</p>
  </div>
</div>

<div class="row">
  <div class="small-6 columns">
    <div class="panel">
      <h2>Client:</h2>

      <strong>Name:</strong>
      {{relatedCompany.name}}
      <br>

      <strong>Address:</strong>
      {{relatedCompany.address}}
      <br>
      {{relatedCompany.city}}
      -
      {{relatedCompany.country}}
      <br>

      <strong>Telephone:</strong>
      {{relatedCompany.telephone}}
    </div>
  </div>
</div>

<div class="row">
  <div class="small-12 columns">
    <table role='grid'>
      <thead>
        <tr>
          <th>Concept</th>
          <th>Unit price</th>
          <th>Quantity</th>
          <th>Total before taxes</th>
          <th>VAT</th>
          <th>IRPF</th>
          <th>TOTAL</th>
        </tr>
      </thead>

      <tbody>
        {{#each item in items}}
          <tr>
            <td>{{item.concept}}</td>
            <td>{{item.unitPrice}}</td>
            <td>{{item.quantity}}</td>
            <td>{{item.totalWithoutTaxes}}</td>
            <td>{{item.vat}} ({{item.vatPercentage}}%)</td>
            <td>{{item.irpf}} ({{item.irpfPercentage}}%)</td>
            <td>{{item.total}}</td>
          </tr>
        {{/each}}
      </tbody>
      <tfoot>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td>{{totalWithoutTaxes}}</td>
          <td>{{vat}}</td>
          <td>{{irpf}}</td>
          <td><strong>{{total}}</strong></td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>

<div id="invoice-pdf-modal" class="reveal-modal" data-reveal>
  <a {{action 'closePdf'}} class="close-reveal-modal">&#215;</a>
  <object data="" type="application/pdf" width="100%" height="100%"></object>
</div>
